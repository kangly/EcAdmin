<div class="card">
    <form class="form-horizontal" method="post" id="admin-change-password-form" action="{:url('/admin/index/saveChangePassword')}">
        <div class="card-body p-t-0">
            <div class="form-group row">
                <label for="old_password" class="col-sm-2 text-left control-label col-form-label"><span class="text-danger">*</span> 旧密码</label>
                <div class="col-sm-10">
                    <input type="password" class="form-control" name="old_password" id="old_password" placeholder="旧密码">
                </div>
            </div>
            <div class="form-group row">
                <label for="new_password" class="col-sm-2 text-left control-label col-form-label"><span class="text-danger">*</span> 新密码</label>
                <div class="col-sm-10">
                    <input type="password" class="form-control" name="new_password" id="new_password" placeholder="新密码">
                </div>
            </div>
            <div class="form-group row">
                <label for="confirm_password" class="col-sm-2 text-left control-label col-form-label"><span class="text-danger">*</span> 确认新密码</label>
                <div class="col-sm-10">
                    <input type="password" class="form-control" name="confirm_password" id="confirm_password" placeholder="确认新密码">
                </div>
            </div>
        </div>
        <div class="border-top">
            <div class="card-body">
                <button type="button" class="btn btn-success btn-sm" onclick="saveChangePassword()">修改</button>
            </div>
        </div>
        <input type="hidden" name="_method" value="POST">
    </form>
</div>

<script type="text/javascript">
    function saveChangePassword(){
        if(_trim_assign($('#old_password'))==''){
            tip_error('旧密码必填！',3);
            return;
        }
        var new_password = _trim_assign($('#new_password'));
        if(new_password==''){
            tip_error('新密码必填！',3);
            return;
        }
        var confirm_password = _trim_assign($('#confirm_password'));
        if(confirm_password==''){
            tip_error('确认新密码必填！',3);
            return;
        }
        if(new_password!=confirm_password){
            tip_error('两次输入密码不一致！',3);
            return;
        }
        submitTheForm('admin-change-password-form',function(data){
            if(data>0){
                urlLocation("{:url('/admin/login')}");
            }
        });
    }
</script>